generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id              String           @id @default(uuid())
  notes           Notes[]
  classEnrollments ClassEnrollment[]
  classesTaught   Class[]          @relation("ClassesTaught")
  questions       Question[]   
  cueCards        CueCard[]  
}

model Class {
  id              String           @id @default(uuid())
  name            String
  description     String
  teacherID       String
  teacher         User             @relation(name: "ClassesTaught", fields: [teacherID], references: [id])
  classSessions   ClassSession[]
  classEnrollments ClassEnrollment[]
}

model ClassSession {
  id              String           @id @default(uuid())
  date            DateTime
  classID         String
  lessonPlan      String
  transcript      String
  class           Class           @relation(fields: [classID], references: [id])
  notes           Notes[]
  analytics       Analytics[]
  questions       Question[]   
  cueCards        CueCard[]     
}

model Notes {
  id              String           @id @default(uuid())
  content         String
  userID          String
  classSessionID  String
  user            User             @relation(fields: [userID], references: [id])
  classSession    ClassSession     @relation(fields: [classSessionID], references: [id])
}

model Question {
  id              String           @id @default(uuid())
  content         String
  answer          String
  userID          String
  classSessionID  String
  user            User             @relation(fields: [userID], references: [id])
  classSession    ClassSession     @relation(fields: [classSessionID], references: [id])
}

model CueCard {
  id              String           @id @default(uuid())
  content         String
  answer          String
  userID          String
  classSessionID  String
  user            User             @relation(fields: [userID], references: [id])
  classSession    ClassSession     @relation(fields: [classSessionID], references: [id])
}

model Analytics {
  id              String           @id @default(uuid())
  classSessionID  String
  averageFeeling  Int
  otherMetrics    String?
  classSession    ClassSession     @relation(fields: [classSessionID], references: [id])
}

model ClassEnrollment {
  id              String           @id @default(uuid())
  userID          String
  classID         String
  user            User             @relation(fields: [userID], references: [id])
  class           Class            @relation(fields: [classID], references: [id])
}
